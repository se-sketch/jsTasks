<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Apply JavaScript example</title>
  </head>

  <body>
    <script type="text/javascript">
      /*
      Function.prototype.defer = function(ms){
        setTimeout(this, ms);
      }

      function f() {
        console.log("Hello!");
      }


      f.defer(1000); // shows "Hello!" after 1 second
      */
    </script>

    <script type="text/javascript">
      /*
      Function.prototype.defer = function(ms){
        let f = this;
        return function(...args){
          setTimeout(() => f.apply(this, args), ms);
        }
      }

      function f(a, b) {
        console.log(a + b);
      }

      f.defer(1000)(1, 2); // shows 3 after 1 second      
      */
    </script>

    <script type="text/javascript">
      Function.prototype.defer = function(ms) {
        let f = this;
        return function(...args) {
          setTimeout(() => f.apply(this, args), ms);
        }
      };

      let user = {
        name: "John",
        sayHi() {
          console.log(this.name);
        }
      }

      user.sayHi = user.sayHi.defer(1000);

      user.sayHi();
    </script>
  </body>
</html>